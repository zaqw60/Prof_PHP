<?php//// Конттроллер страницы чтения.//include_once('m/M_User.php');class C_User extends C_Base{	//    // Конструктор.	//		public function action_auth(){		$this->title.= '::Авторизация';        $user = new M_User();		$info = "Пользователь не авторизован";        $act = "Авторизация";        if($this->IsPost()){            $login = (!empty($_POST['login'])) ? strip_tags($_POST['login']) : "";            $pass = (!empty($_POST['pass'])) ? md5(strip_tags($_POST['pass'])) : "";            if($user->auth($login,$pass)) {                header("Location:index.php");            }else{                header("Location:index.php?act=reg&c=User");            }		}		else{		   $this->content = $this->Template('v/v_auth.php', array('info'=>$info, 'act'=>$act));		}	}    public function action_reg(){        $this->title.= '::Регистрация';        $user = new M_User();        $info = "Пользователь не зарегистрирован";        $act = "Регистрация";        if($this->IsPost()){            $login = (!empty($_POST['login'])) ? strip_tags($_POST['login']) : "";            $pass = (!empty($_POST['pass'])) ? md5(strip_tags($_POST['pass'])) : "";            if($user->reg($login,$pass)) {                header("Location:index.php");            }else{                header("Location:index.php?act=auth&c=User");            }        }        else{            $this->content = $this->Template('v/v_auth.php', array('info'=>$info, 'act'=>$act));        }    }    public function action_exit(){        $this->title.= '::Выход';        $user = new M_User();        $user->ex();        header("Location:index.php");    }    public function action_profile(){        $this->title.= '::Личный кабинет';        $user = new M_User();        $str = $user->ident();        $this->content = $this->Template('v/v_prof.php', array('user'=>$str));    }}